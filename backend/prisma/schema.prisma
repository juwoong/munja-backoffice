generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String     @id @default(uuid())
  email        String     @unique
  passwordHash String
  status       UserStatus @default(PENDING)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
}

enum UserStatus {
  PENDING
  APPROVED
  REJECTED
}

model ValidatorReward {
  id              String   @id @default(uuid())
  operatorAddress String
  epoch           Int
  rewardAmount    String
  claimed         Boolean  @default(false)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@unique([operatorAddress, epoch])
}

model RewardAction {
  id           String           @id @default(uuid())
  actionType   RewardActionType
  amount       String // Amount in base units (for both RESTAKING and SELL)
  averagePrice Float? // Average price per token for SELL actions (optional)
  note         String? // Optional note
  createdAt    DateTime         @default(now())
  updatedAt    DateTime         @updatedAt
}

enum RewardActionType {
  RESTAKING
  SELL
}
